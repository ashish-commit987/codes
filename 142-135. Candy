// class Solution {
//     public int candy(int[] ratings) {
//         int n=ratings.length;
//         int[] left=new int[n];
//         int[] right=new int[n];
//         left[0]=1;
//         if(n==1) return 1;
//         for(int i=1;i<n;i++){
//             if(ratings[i]>ratings[i-1]){
//                 left[i]=left[i-1]+1;
//             }
//             else{
//                 left[i]=1;
//             }
//         }
//         right[n-1]=1;
//         for(int i=n-2;i>=0;i--){
//             if(ratings[i]>ratings[i+1]){
//                 right[i]=right[i+1]+1;
//             }
//             else {
//                 right[i]=1;
//             }
//         }
//         int[] total=new int[n];
//         for(int i=0;i<n;i++){
//             total[i]=Math.max(right[i],left[i]);   
//         }
//         int sum=0;
//         for(int i=0;i<n;i++){
//             sum+=total[i];
//         }
//         return sum;
//     }
// }

class Solution {
    public int candy(int[] ratings) {
        int n = ratings.length;
        if (n == 1) return 1;

        int candies = 1;     
        int up = 0;           
        int down = 0;        
        int peak = 0;         
        for (int i = 1; i < n; i++) {
            if (ratings[i] > ratings[i - 1]) { 
                up++;
                peak = up;
                down = 0;
                candies += 1 + up;
            } 
            else if (ratings[i] == ratings[i - 1]) { 
                up = 0;
                down = 0;
                peak = 0;
                candies += 1;
            } 
            else { 
                up = 0;
                down++;
                if(peak>=down){
                    candies=candies+1+down-1;   // down-1 isliye kara hai kyuki neeche jaise hi slope badta jaa rha hai hum ek extra de rhe hai prev se.
                }
                else{
                    candies=candies+1+down-1+1; // +1 end mein peek ko ek se inc karne ke liye
                }
            }
        }

        return candies;
    }
}
https://leetcode.com/problems/candy/
